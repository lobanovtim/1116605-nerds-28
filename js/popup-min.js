var popuplink=document.querySelector(".button-contacts"),popup=document.querySelector(".popup-container"),popupClose=popup.querySelector(".button-cross"),userName=popup.querySelector(".user-name"),userEmail=popup.querySelector(".user-email"),form=popup.querySelector(".form-box"),mandatory=popup.querySelectorAll(".input-content"),popupClassShow="popup-container--show",popupClassError="popup-container--error",isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}popuplink.addEventListener("click",function(){popup.classList.add(popupClassShow),event.preventDefault(),mandatory.forEach(function(e){e.removeAttribute("required")}),storage?(userName.value=storage,userEmail.focus()):userName.focus()}),popupClose.addEventListener("click",function(e){popup.classList.remove(popupClassShow),popup.classList.remove(popupClassError)}),form.addEventListener("submit",function(e){userName.value&&userEmail.value?isStorageSupport&&localStorage.setItem("name",userName.value):(e.preventDefault(),popup.classList.remove(popupClassError),popup.offsetWidth,popup.classList.add(popupClassError))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains(popupClassShow)&&(popup.classList.remove(popupClassShow),popup.classList.remove("popup-error"))});